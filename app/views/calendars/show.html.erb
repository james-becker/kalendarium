<div class="month">
  <ul>
    <%= link_to calendar_path(@basis - 1.month) do %>
      <li class="prev">&#10094;</li>
    <% end %>
    <%= link_to calendar_path(@basis + 1.month) do %>
      <li class="next">&#10095;</li>
    <% end %>
    <li>
      <h1><%= @basis.strftime('%B').downcase.capitalize %></h1>
      <br>
      <span style="font-size:18px"><%= @basis.strftime('%Y') %></span>
    </li>
  </ul>
</div>

<div class="days">
  <div class="weekday">Mon</div>
  <div class="weekday">Tues</div>
  <div class="weekday">Wed</div>
  <div class="weekday">Thurs</div>
  <div class="weekday">Fri</div>
  <div class="weekday">Sat</div>
  <div class="weekday">Sun</div>

  <%= link_to "Add", new_event_path, class: "btn btn-primary", id: "btn-add-event" %>

</div>


<div class="days">

  <!-- Pad unused days before first of month -->
  <% @prior_days.times do |day| %>
    <div class="day empty-day">
    </div>
  <% end %>

  <!-- Dynamically generate days of month -->
  <% date = 1 %>
  <% @days_in_month.times do |day| %>

    <% date_obj = DateTime.new(@basis.year, @basis.month, date) %>

    <div class="day">

      <% if date_obj == Date.today %>
        <div class="day-date active">
          <%= date %>
        </div>
      <% else %>
        <div class="day-date">
          <%= date %>
        </div>
      <% end %>

      <div class="day-events">
        <!-- Show any events for that day -->
        <% if Event.where('start_time BETWEEN ? AND ?', date_obj.beginning_of_day, date_obj.end_of_day).any? %>
          <% Event.where('start_time BETWEEN ? AND ?', date_obj.beginning_of_day, date_obj.end_of_day).each do |event| %>
            â€¢ <%= event.name %> at <%= event.start_time.strftime("%H:%M") %>
          <% end %>
        <% end %>
      </div>

    </div>

    <% date += 1 %>
  <% end %>

  <!-- Pad unused days after last of month -->
  <% @following_days.times do |day| %>
    <div class="day empty-day">
    </div>
  <% end %>

</div>
