<div class="month">
  <ul>
    <%= link_to calendar_path(@basis - 1.month) do %>
      <li class="prev">&#10094;</li>
    <% end %>
    <%= link_to calendar_path(@basis + 1.month) do %>
      <li class="next">&#10095;</li>
    <% end %>
    <li>
      <h1><%= @basis.strftime('%B').downcase.capitalize %></h1>
      <br>
      <span style="font-size:18px"><%= @basis.strftime('%Y') %></span>
    </li>
  </ul>
</div>





<div class="days">
  <div class="weekday">Mon</div>
  <div class="weekday">Tues</div>
  <div class="weekday">Wed</div>
  <div class="weekday">Thurs</div>
  <div class="weekday">Fri</div>
  <div class="weekday">Sat</div>
  <div class="weekday">Sun</div>

  <button id="btn-add-event" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Quick Add
  </button>

</div>

<!-- Add Event Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="exampleModalLabel">Quick Add</h2>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= render 'events/new' %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Add to Calendar</button>
      </div>
    </div>
  </div>
</div>


<div class="days">

  <!-- Pad unused days before first of month -->
  <% @prior_days.times do |day| %>
    <div class="day empty-day">
    </div>
  <% end %>

  <!-- Dynamically generate days of month -->
  <% date = 1 %>
  <% @days_in_month.times do |day| %>

    <% date_obj = DateTime.new(@basis.year, @basis.month, date) %>

    <div class="day">

      <% if date_obj == Date.today %>
        <div class="day-date active">
          <%= date %>
        </div>
      <% else %>
        <div class="day-date">
          <%= date %>
        </div>
      <% end %>

      <div class="day-events">
        <!-- Show any events for that day -->
        <% if Event.where('start_time BETWEEN ? AND ?', date_obj.beginning_of_day, date_obj.end_of_day).any? %>
          <% Event.where('start_time BETWEEN ? AND ?', date_obj.beginning_of_day, date_obj.end_of_day).each do |event| %>
            â€¢ <%= event.name %> at <%= event.start_time.strftime("%H:%M") %>
          <% end %>
        <% end %>
      </div>

    </div>

    <% date += 1 %>
  <% end %>

  <!-- Pad unused days after last of month -->
  <% @following_days.times do |day| %>
    <div class="day empty-day">
    </div>
  <% end %>

</div>
